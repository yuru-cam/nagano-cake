
<!--会員側：新規注文受付、支払方法入力画面-->

<p>注文情報入力</p>

<!--モデルオプションのform_with使用してるからコントローラにインスタンスを指定する！-->
<%= form_with model: @order do |f| %>
  <!--もしエラー出たら-->
  <!--<#% if ＠order.errors.any? %>-->
  　<!--バリデーションエラー文がこれ-->
  <!--  <div id="error_explanation" class="alert alert-danger">-->
  <!--    <ul>-->
  <!--      <#% @order.errors.full_messages.each do |message| %>-->
  <!--        <li><#%= message %></li>-->
  <!--      <#% end %>-->
  <!--    </ul>-->
  <!--  </div>-->
  <!--<#% end %>-->

<p>支払方法</p>
  <div class="field">
    <%= f.radio_button :payment_method, Order.payment_methods.key(0) %>
    <%= f.label :payment_method, Order.payment_methods_i18n[:credit_card] %>
    <%= f.radio_button :payment_method, Order.payment_methods.key(1) %>
    <%= f.label :payment_method, Order.payment_methods_i18n[:transfer]%>
  </div>

  <div class="form-group">
		<label><span class="glyphicon glyphicon-stop"></span>お届け先</label>
		<!-- ここから下がご自身の住所 -->
		<div class="radio">
			<%= f.radio_button :select_address , :"0" %>
			<%= f.label :select_address, "ご自身の住所" %>
			<span>〒<%= current_customer.postcode%><%= current_customer.address%><%= current_customer.full_name%></span>
			<span>〒<%= current_customer.postcode %> <%= current_customer.address %></span>
		</div>
		<!-- ここから下が登録済住所から選択 -->
		<div class="radio">
			<%= f.radio_button :select_address , :"1" %>
			<%= f.label :select_address, "登録済み住所から選択" %>
			<%= f.select :select_address, options_from_collection_for_select(ShippingAddress.all, :id, :full_address) %>
		</div>
		<!-- ここから下が新しく配送先を設定-->
		<div class="radio">
			<%= f.radio_button :select_address , :"2" %>
			<%= f.label :select_address , "新しいお届け先" %>
			 <div class="form-group">
        <%= f.label :"郵便番号(ハイフンなし)" ,class: "control-label" %>
        <%= f.text_field :shipping_postcode, class: "form-control-static postal_code" %>
       </div>
       <div class="form-group">
         <%= f.label :"住所" ,class: "control-label" %>
         <%= f.text_field :shipping_address, class: "form-control-static address" %>
       </div>
       <div class="form-group">
          <%= f.label :"宛名" ,class: "control-label" %>
          <%= f.text_field :shipping_name, class: "form-control-static name" %>
        </div>
    </div>
    <div class="text-center">
		<%= f.submit '確認画面へ進む', url: orders_confirm_path , method: :post ,class:"btn btn-success" %>
		</div>
		<% end %>

</div>


<!--<p>お届け先</p>-->
<!--配送先との関連付けが必要、仮入力・・・-->

<!--  <div class="field">-->
<!--    <%#= form.label :address %>-->
<!--    <%#= form.select :address, Order.addresses.keys.to_a, {} %>-->
<!--  </div>-->


<!--ボタン表示させるためlinl_toの引数１つに、そしてdo追加、-->
<!--さらにdo,endでボタン化させるためのhtml記述のサンドイッチ-->
  <%= link_to "確認画面へ進む", orders_confirm_path , method: :post %>